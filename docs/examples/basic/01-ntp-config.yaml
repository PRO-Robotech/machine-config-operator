# NTP configuration for worker nodes
# Synchronizes time using Google and Cloudflare NTP servers
apiVersion: mco.in-cloud.io/v1alpha1
kind: MachineConfig
metadata:
  name: ntp-config
  labels:
    mco.in-cloud.io/pool: worker
spec:
  priority: 30
  files:
    - path: /etc/chrony.conf
      content: |
        server time.google.com iburst
        server time.cloudflare.com iburst
        driftfile /var/lib/chrony/drift
        makestep 1.0 3
        rtcsync
        logdir /var/log/chrony
      mode: 420
  systemd:
    units:
      - name: chronyd.service
        enabled: true
        state: started

